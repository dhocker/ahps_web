{#
# AHPS Web - web server for managing an AtHomePowerlineServer instance
# Copyright (C) 2014, 2015  Dave Hocker (email: AtHomeX10@gmail.com)
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, version 3 of the License.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
# See the LICENSE file for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program (the LICENSE file).  If not, see <http://www.gnu.org/licenses/>.
#}

<!doctype html>
<title>AHPS Web</title>

<head class="page">
    {# This uses the stock distribution of jQuery and jQueryUI from code.jquery.com #}
    <link rel="stylesheet" href="{{ url_for('static', filename='jquery/jquery-ui.css') }}">
    <script src="{{ url_for('static', filename='jquery/jquery.js') }}"></script>
    <script src="{{ url_for('static', filename='jquery/jquery-ui.js') }}"></script>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">

    {# Timeentry jQuery plugin #}
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='timeentry/jquery.timeentry.css') }}">
	<script type="text/javascript" src="{{ url_for('static', filename='timeentry/jquery.plugin.min.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename='timeentry/jquery.timeentry.min.js') }}"></script>

    {# Common Javascript functions #}
    <script type="text/javascript">

        function unsaved_changes_warning(e){
            e.returnValue = "You have unsaved changes on this page.";
            {#
            Some browsers (e.g. Chrome, Safari will display the returned text.
            Firefox does not display the returned text.
            #}
            return e.returnValue;
        }

        function track_change(){
            window.onbeforeunload = unsaved_changes_warning;
        }

    </script>

    {% block head %}{% endblock %}
</head>

<div class="page">
	<h1><img class="logo" src="{{ url_for('static', filename='AtHomeX10.png') }}" />AHPS Web</h1>
	<div class="metanav">
        {% if current_user.is_authenticated() %}
            <span>Logged in as {{ current_user.username }} </span>&nbsp
    	    <a href="{{ url_for('user.logout') }}">Logout</a>
            <a href="{{ url_for('user.change_password') }}">Change Password</a>
        {% else %}
            {# Place holder to keep header bar size #}
            <p/>
        {% endif %}
	</div>

    {% if error %}
        <p class="error"><strong>Error:</strong> {{ error }}</p>
    {% endif %}

    {% for category, message in get_flashed_messages(with_categories=true) %}
        <div class="flash">{{ category | capitalize() }}: {{ message }}</div>
    {% endfor %}

    {% block body %}{% endblock %}

    <div class="clear"></div>
    <div class="footer">
        <a href="{{ url_for('home') }}">Home</a>
        <a href="{{ url_for('house_summary') }}">Summary</a>
        {% block footer_links %}{% endblock %}
        <div class="copyright">
            <a href="{{ url_for('about') }}">AtHomePowerlineServer Web {{ version }} -- Copyright 2014 by Dave Hocker</a>
        </div>
    </div>
</div>